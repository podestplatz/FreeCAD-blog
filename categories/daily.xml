<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>FreeCAD BCF-Plugin development blog (Posts about daily)</title><link>https://podestplatz.github.io/FreeCAD-blog/</link><description></description><atom:link href="https://podestplatz.github.io/FreeCAD-blog/categories/daily.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents Â© 2019 &lt;a href="mailto:podestplatz@gmail.com"&gt;Patrick Podest&lt;/a&gt; </copyright><lastBuildDate>Wed, 05 Jun 2019 16:33:22 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Dev Logs</title><link>https://podestplatz.github.io/FreeCAD-blog/posts/dev-logs/</link><dc:creator>Patrick Podest</dc:creator><description>&lt;div&gt;&lt;p&gt;This is a daily updated log of the work I do on the &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/"&gt;BCF-plugin&lt;/a&gt; for FreeCAD&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;June 5th:&lt;/strong&gt; Today I finally followed the suggestion of @yorik and replaced my
own code for getting the path to the temporary folder with the python module
&lt;cite&gt;tempfiles&lt;/cite&gt;, for more information see &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/5616fd92e0a6e1d83cd99cae0ff85f7689ae0b99"&gt;commit 5616fd9&lt;/a&gt;. &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/ac589c8fff50d9aa2ad63a70b92479277cd6cd38"&gt;commit ac589c8&lt;/a&gt; is a
small one, but with some repercussions. In it I added &lt;cite&gt;_viewpoint&lt;/cite&gt; to the
initialization sequence of the &lt;cite&gt;markup.__init__()&lt;/cite&gt; function. Without it I
wouldn't have been able to use the property &lt;cite&gt;markup.viewpoint&lt;/cite&gt;. The amount the
previous commit was smaller than usual &lt;cite&gt;commit c9f9ea4&lt;/cite&gt; is larger. In it I
realized some conceptual stuff, like already implementing three interfaces in
many classes, that will make the writer module easier to write and more
maintainable. For this I added the &lt;cite&gt;./src/interfaces&lt;/cite&gt; folder. It is its own
python package, and defines three modules/interfaces (atm):&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;State: represents the state of an object during the plugin lifetime&lt;/li&gt;
&lt;li&gt;Hierarchy: allows an object to know the object it is part of and thereby
somewhat implementing a doubly linked tree. For example consider an object
of &lt;cite&gt;Markup&lt;/cite&gt;. It probably has one or more objects of type &lt;cite&gt;Comment&lt;/cite&gt;. Now each
comment has a member &lt;cite&gt;containingObject&lt;/cite&gt;, which in this case references the
one object of type &lt;cite&gt;Markup&lt;/cite&gt; that references it.&lt;/li&gt;
&lt;li&gt;Identifiable: allows an object to define a unique Id, if it shall be
uniquely identifiable. This is intended to be used mainly for objects that
can occur multiple times. Like for example &lt;cite&gt;Viewpoint&lt;/cite&gt;. Here the Id is the
id defined in the XML file.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;But please refer to the commit itself for more information, as it has a rather
extensive commit message, describing the interfaces in more detail.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;June 4th:&lt;/strong&gt; In &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/0557bcc4eddf1175393fc26cd0526e8d0d3d55b9"&gt;commit 0557bcc&lt;/a&gt; I fixed the issue where the &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/blob/9ecb6b1009521a147cc87bf3a37bceb905ca7f22/src/bcf/markup.py#L106"&gt;Comment&lt;/a&gt; s didn't
have a valid &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/blob/9ecb6b1009521a147cc87bf3a37bceb905ca7f22/src/bcf/markup.py#L43"&gt;ViewpointReference&lt;/a&gt; object after creation. The member
&lt;cite&gt;Comment.viewpoint&lt;/cite&gt; should, after creation, hold a reference to a valid
&lt;cite&gt;ViewpointReference&lt;/cite&gt; object that was created in &lt;cite&gt;reader.buildMarkup()&lt;/cite&gt;. Actually it was not
implemented till today, I just left a TODO note for me.
In &lt;a href="https://podestplatz.github.io/FreeCAD-blog/posts/dev-logs/#id1"&gt;&lt;span class="problematic" id="id2"&gt;`commit 354d2c4`_&lt;/span&gt;&lt;/a&gt; I added new testcases, all for testing the results of
&lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/blob/9ecb6b1009521a147cc87bf3a37bceb905ca7f22/src/bcf/reader.py#L528"&gt;reader.buildViewpoint()&lt;/a&gt;. &lt;a href="https://podestplatz.github.io/FreeCAD-blog/posts/dev-logs/#id3"&gt;&lt;span class="problematic" id="id4"&gt;`commit 0733b59`_&lt;/span&gt;&lt;/a&gt; includes fixes of bugs I became
aware of during testing &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/blob/9ecb6b1009521a147cc87bf3a37bceb905ca7f22/src/bcf/reader.py#L528"&gt;reader.buildViewpoint()&lt;/a&gt;, as well as the
implementation of &lt;cite&gt;__str__()&lt;/cite&gt; for some more classes, which helped during
debugging. Then &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/d6cb41c06bf1eb77f4fdd42782e4a61fd4a1a1fd"&gt;commit d6cb41c&lt;/a&gt; also contains bug fixes and debug prints were
remove, but see more in the commit message. And finally I added the file
&lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/blob/master/src/bcf/writer.py"&gt;./src/bcf/writer.py&lt;/a&gt; with some dictionaries that I will need for the writer
module.&lt;/p&gt;
&lt;p&gt;Last but not least one thing I learned today using git: don't rebase onto
master. Rebase master onto some branches but not the other way around. This
makes things messy.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;June 3rd:&lt;/strong&gt; A new blog post is ready, this one elaborates a bit on the ideas I
have in regards to handling &lt;a class="reference external" href="https://podestplatz.github.io/FreeCAD-blog/posts/handling-non-conform-bcf-files/"&gt;non schema conform BCF files&lt;/a&gt;. The &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commits/unit_tests"&gt;branch unit_tests&lt;/a&gt;
got a few new commits, mainly adding test cases for the &lt;cite&gt;reader.buildTopic()&lt;/cite&gt;
and &lt;cite&gt;reader.buildComment()&lt;/cite&gt; functions, for more info see &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/c94d812af69e05cc0128b32038ab2e01927afeb0"&gt;commit c94d812&lt;/a&gt;.
&lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/7a31462cb37e0cc94eebeda8a02af4641ab42ca6"&gt;commit 7a31462&lt;/a&gt; contains bug fixes for bugs that I became aware of due to the
newly created test cases. Offline I thought for an extended period of time about
how to structure an update in place approach to writing the bcf file, rather
than writing the whole file at once. For this a new blog post is coming this
week.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;June 2nd:&lt;/strong&gt; I have written on a blog post about how to handle non XSD conform
BCF files (which is not finished, yet). Otherwise I paused development.
Tomorrow it is gonna be picked up again!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;June 1st:&lt;/strong&gt; Today not much work was done, but here is a little summary. I
implemented the &lt;cite&gt;__eq__()&lt;/cite&gt; function in every class I defined, see &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/03057542226fde14de0bf312e032ec4e41d23a4b"&gt;commit
0305754&lt;/a&gt;. This shall help me in the future when I want to write unit tests.
In &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/blob/master/src/bcf/reader.py"&gt;reader.py&lt;/a&gt; I inserted a rather long comment about how the &lt;cite&gt;buildX&lt;/cite&gt;
functions, like what they do, what they expect and what they return. Since all
behave the same I have written one big comment to document all of them, but see
&lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/a05e22b45d3ff86871d5ac14e355cf25e4b45596"&gt;commit a05e22b&lt;/a&gt;. The branch &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commits/feature_read_viewpoint"&gt;feature_read_viewpoint&lt;/a&gt; got merged into master,
for testing I will create a own testing branch. And I created a package out of
the &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/tree/master/src/bcf"&gt;src/bcf&lt;/a&gt; directory that just exports &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/blob/master/src/bcf/reader.py"&gt;reader.py&lt;/a&gt; and &lt;cite&gt;writer.py&lt;/cite&gt; (latter
one I still have to write), for details see &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/015c2f6fc162b6dbe15a9c3bc8957679935dd1a6"&gt;commit 015c2f6&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;May 31st:&lt;/strong&gt; Today all work was done on the &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commits/feature_read_viewpoint"&gt;feature_read_viewpoint&lt;/a&gt;-branch.
Most important the function &lt;cite&gt;reader.buildViewpoint()&lt;/cite&gt; is finished and with it
the last step was completed to being able to read in a complete BCF file, given
it is validated successful against the XML schemas. For more info see &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/2922d71af78845bfbdb05ac571c232cfcfdd5989"&gt;commit
2922d71&lt;/a&gt;. To test the reader "module" I created two new topics in
&lt;cite&gt;src/bcf/test_data&lt;/cite&gt;. One is complete in the way that it defines at least one
element for every node in all files specified by the corresponding XSD file. The
third topic just has a complete header element in &lt;cite&gt;markup.bcf&lt;/cite&gt;. For more info
see &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/7fa127aec6847d9bd653fe43f345b7ee4eaa992b"&gt;commit 7fa127a&lt;/a&gt;. Now ViewpointReference has a reference to the
corresponding Viewpoint object. The inheritance approach thrown away because
after reading in all ViewpointReferences from &lt;cite&gt;markup.bcf&lt;/cite&gt; the Viewpoint objects
would have been created, but with no relation to their super class. This meant
that an object of the former could not have been used as an object of the latter
without recreation of this object. That further would have complicated the code,
and made it hard to understand and maintain. Therefore composition was chosen in
favor of inheritance. For more info also see &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/2922d71af78845bfbdb05ac571c232cfcfdd5989"&gt;commit 2922d71&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;May 30th:&lt;/strong&gt; Added the folder &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/tree/master/src/bcf/test_data"&gt;src/bcf/test_data&lt;/a&gt; that is intended to contain
test data for testing during development, but not primarily for unit tests now.
Currently it contains an example compliant with the schema files. For more info
see &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/6fb72f5bbefddc0a063f67c4d6fa806b68763ee2"&gt;commit 6fb72f5&lt;/a&gt;. In &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/30b998d12ce4c647abc26a6e42a9a5f0efd872fd"&gt;commit 30b998d&lt;/a&gt; I changed the type of every variable
associated with &lt;cite&gt;SchemaConstraints&lt;/cite&gt; to an elementary type. Reason being that the
&lt;cite&gt;extensions.xsd&lt;/cite&gt; file (as my understanding goes) is intended to be specified
in the xml file itself as ... well, an extension to the existing schema.
Finished function &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/blob/3f5fdafb09422e0be0fb10f59f1df76619b2a3ea/src/bcf/reader.py#L350"&gt;reader.buildMarkup()&lt;/a&gt;, although still a "#TODO" comment is
above the function header. Also in &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/aa045980b5f2391b7d93dbf2caa163c6f7f8acac"&gt;commit aa04598&lt;/a&gt; the class
&lt;cite&gt;DocumentReference&lt;/cite&gt; and &lt;cite&gt;BimSnippet&lt;/cite&gt; was added. Last but not least: started
working on reading in &lt;cite&gt;viewpoint.bcfv&lt;/cite&gt;. But not finished, that is why this
development is still on the branch &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commits/feature_read_viewpoint"&gt;feature_read_viewpoint&lt;/a&gt;. For more info
refer to &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/154630d4238172610a221dc6ae3c1023c037c553"&gt;commit 154630d&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;May 29th:&lt;/strong&gt; Already started refactoring a bit in &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/blob/master/src/bcf/reader.py"&gt;reader.py&lt;/a&gt;. Went away from
using &lt;cite&gt;ZipFile&lt;/cite&gt; objects when operating on the zipFile to the extracted version
of the zip file instead. Written function &lt;cite&gt;reader.readInFile()&lt;/cite&gt; that shall read
the complete BCF file into the data structure (see &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/9a791627b16b09e9c6641975e6fb0a9bf7e72856"&gt;commit 9a79162&lt;/a&gt;). During testing
I noticed that the example BCF file from the &lt;a class="reference external" href="https://www.bimcollab.com/en/Support/Support/Downloads/Examples-templates"&gt;bimcollab website&lt;/a&gt; is not valid
becaus it defines an empty node &lt;cite&gt;Header&lt;/cite&gt; in &lt;cite&gt;markup.bcf&lt;/cite&gt; of topic
&lt;cite&gt;ebb1a8bf-6d1d-4aad-a875-61ad3cc40d30&lt;/cite&gt; which is prohibited by &lt;cite&gt;markup.xsd&lt;/cite&gt; of
BCF version 2.1.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;May 28th:&lt;/strong&gt; Created a new blog post about the way the schema constraints are
handled now (&lt;a class="reference external" href="https://podestplatz.github.io/FreeCAD-blog/posts/schema-constraints-revisited/"&gt;schema constraints revisited&lt;/a&gt;). Change configuration file of the
blog to reflect the current project, instead of the FreeCAD development blog.
Started a unit-test suite, see &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/tree/unit_tests/src/tests"&gt;branch unit_tests ./src/tests&lt;/a&gt;, and test cases
written for &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/blob/991d967ab5fc00f8960bbc938c727d11e42c950c/src/bcf/reader.py#L145"&gt;reader.buildProject()&lt;/a&gt;. Written function in &lt;cite&gt;reader.py&lt;/cite&gt; that
parses &lt;cite&gt;bcf.version&lt;/cite&gt; and returns the version number as string, see &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/cccde6ae2bdf52f21f5e7ecfeb68cc89957af29e"&gt;commit
cccde6a&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;May 27th:&lt;/strong&gt; Complete the python representation of the class diagram &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/0a1081bb1fe26dc729d3a2b708fde491b3a31505"&gt;commit
0a1081b&lt;/a&gt;. Also advanced to the point where a &lt;cite&gt;.bcf&lt;/cite&gt; can be opened, every XML
file be validated (in theory, only tested it with project.bcfp yet) and the
contents of &lt;cite&gt;project.bcfp&lt;/cite&gt; are can be written to an object of &lt;cite&gt;Project&lt;/cite&gt;. For
more details refer to following commits:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/bae270f1127039ae78876bf6f3785c48ec0e30b9"&gt;commit bae270f&lt;/a&gt;: Add util.py and reader.py&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/3c0b9d0a1beed02816cd15b0a5186368d7361f7d"&gt;commit 3c0b9d0&lt;/a&gt;: util.py: add schemaValidate&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/f62ed23a73e209fc69995fccedf4e20beddf7632"&gt;commit f62ed23&lt;/a&gt;: reader.py: add buildProject&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;May 26th:&lt;/strong&gt; Update Comment in class diagram. For more info see &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/1c34ad907b7fc56cd96aa2fc5aa133e3f445a24b"&gt;commit 1c34ad9&lt;/a&gt;, and create &lt;a class="reference external" href="https://forum.freecadweb.org/viewtopic.php?p=310515#p310515"&gt;mockup of the plugin interface&lt;/a&gt;.
Write part one of the class model in python see &lt;a class="reference external" href="https://github.com/podestplatz/BCF-Plugin-FreeCAD/commit/31ef931b3637c90ca0c8252f71dd635e66a843fa"&gt;commit 31ef931&lt;/a&gt;.&lt;/p&gt;
&lt;div class="system-messages section"&gt;
&lt;h2&gt;Docutils System Messages&lt;/h2&gt;
&lt;div class="system-message" id="id1"&gt;
&lt;p class="system-message-title"&gt;System Message: ERROR/3 (&lt;tt class="docutils"&gt;&amp;lt;string&amp;gt;&lt;/tt&gt;, line 76); &lt;em&gt;&lt;a href="https://podestplatz.github.io/FreeCAD-blog/posts/dev-logs/#id2"&gt;backlink&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
Unknown target name: "commit 354d2c4".&lt;/div&gt;
&lt;div class="system-message" id="id3"&gt;
&lt;p class="system-message-title"&gt;System Message: ERROR/3 (&lt;tt class="docutils"&gt;&amp;lt;string&amp;gt;&lt;/tt&gt;, line 76); &lt;em&gt;&lt;a href="https://podestplatz.github.io/FreeCAD-blog/posts/dev-logs/#id4"&gt;backlink&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
Unknown target name: "commit 0733b59".&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>daily</category><guid>https://podestplatz.github.io/FreeCAD-blog/posts/dev-logs/</guid><pubDate>Sun, 02 Jun 2019 08:00:00 GMT</pubDate></item></channel></rss>